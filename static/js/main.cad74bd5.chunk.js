(this["webpackJsonpreact-mesto-auth"]=this["webpackJsonpreact-mesto-auth"]||[]).push([[0],{38:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n.n(a),i=n(22),c=n.n(i),s=n(10),r=n(24),u=n(2),l=(n(5),n(3)),p=n.p+"static/media/success-icon.1b6082f8.svg",d=n.p+"static/media/failure-icon.df8eddf6.svg",_=n(13),b=n(15),j=n(16),h=new(function(){function e(t,n){Object(b.a)(this,e),this._url=t,this._headers=n}return Object(j.a)(e,[{key:"_onResponse",value:function(e){return e.ok?e.json():Promise.reject({status:e.status,statusText:e.statusText})}},{key:"signin",value:function(e,t){return fetch("".concat(this._url,"/signin"),{method:"POST",headers:this._headers,body:JSON.stringify({email:e,password:t})}).then(this._onResponse)}},{key:"signup",value:function(e,t){return fetch("".concat(this._url,"/signup"),{method:"POST",headers:this._headers,body:JSON.stringify({email:e,password:t})}).then(this._onResponse)}},{key:"getContent",value:function(e){return fetch("".concat(this._url,"/users/me"),{headers:Object(_.a)(Object(_.a)({},this._headers),{},{Authorization:"Bearer ".concat(e)})}).then(this._onResponse)}}]),e}())("https://auth.nomoreparties.co",{"content-type":"application/json"}),m=n.p+"static/media/burger-icon.a46d5c1c.svg",f=n.p+"static/media/button-cross.d86bb2ed.svg",O=n.p+"static/media/logo.1f1e9591.svg",v=n(0);var g=function(e){var t=e.navPath,n=e.email,o=e.linkText,i=e.isButtonTextGrey,c=e.showMenu,s=e.onHeaderButtonClick,r=Object(a.useState)(!1),p=Object(u.a)(r,2),d=p[0],_=p[1],b=Object(l.g)(),j="header page__header ".concat(c&&d?"header_type_grid":"header_type_flex"),h="header__main ".concat(c&&"header__main_type_bordered"," ").concat(d&&"header__main_visible"," ").concat(!c&&"header__main_visible");return Object(v.jsxs)("header",{className:j,children:[Object(v.jsx)("img",{src:O,alt:"\u041b\u043e\u0433\u043e Mesto",className:"header__logo"}),Object(v.jsxs)("div",{className:h,children:[n&&Object(v.jsx)("span",{className:"header__user-name",children:n}),Object(v.jsx)("button",{className:"header__button ".concat(i&&"header__button_color_grey"),onClick:function(e){s&&s(),b.push(t)},children:o})]}),c&&Object(v.jsx)("button",{className:"header__burger",onClick:function(){_(!d)},children:d?Object(v.jsx)("img",{src:f,alt:"\u043a\u043d\u043e\u043f\u043a\u0430 \u0437\u0430\u043a\u0440\u044b\u0442\u044c",className:"header__close-button"}):Object(v.jsx)("img",{src:m,alt:"\u0431\u0443\u0440\u0433\u0435\u0440-\u043c\u0435\u043d\u044e"})})]})};var x=function(e){var t=e.title,n=e.buttonName,o=e.showedFooter,i=e.onSubmit,c=Object(a.useState)(""),r=Object(u.a)(c,2),l=r[0],p=r[1],d=Object(a.useState)(""),_=Object(u.a)(d,2),b=_[0],j=_[1];return Object(v.jsxs)("div",{className:"login",children:[Object(v.jsxs)("form",{className:"login__form",name:"login-form",onSubmit:function(e){e.preventDefault(),i({email:l,password:b})},noValidate:!0,children:[Object(v.jsx)("h2",{className:"login__heading",children:t}),Object(v.jsxs)("fieldset",{className:"login__info",children:[Object(v.jsxs)("div",{className:"login__container",children:[Object(v.jsx)("input",{type:"email",className:"form-input login__input login__input_name_email",value:l,onChange:function(e){var t=e.target.value;p(t)},name:"email",placeholder:"Email",required:!0}),Object(v.jsx)("span",{className:"login__input-error login__input-error_name_email"}),Object(v.jsx)("input",{type:"password",className:"form-input login__input login__input_name_password",value:b,onChange:function(e){var t=e.target.value;j(t)},name:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",required:!0}),Object(v.jsx)("span",{className:"login__input-error login__input-error_name_password"})]}),Object(v.jsx)("button",{type:"submit",className:"button login__save-button",children:n})]})]}),Object(v.jsx)("footer",{className:"login__footer ".concat(o&&"login__footer_visible"),children:Object(v.jsx)(s.b,{to:"/sign-in",activeClassName:"login__footer-link_active",className:"login__footer-link",children:"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b? \u0412\u043e\u0439\u0442\u0438"})})]})};var N=function(e){var t=e.onSuccess,n=e.onFailure;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(g,{navPath:"/sign-up",linkText:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(v.jsx)(x,{title:"\u0412\u0445\u043e\u0434",buttonName:"\u0412\u043e\u0439\u0442\u0438",showedFooter:!1,onSubmit:function(e){var a=e.email,o=e.password;h.signin(a,o).then((function(e){e.token?(localStorage.setItem("jwt",e.token),t(e.token)):(console.error("No token in response during signin."),n())})).catch((function(e){var t=e.status,a=e.statusText;console.error("Failed to signin.",t,a),n()}))}})]})};var C=function(e){var t=e.onSuccess,n=e.onFailure,a=Object(l.g)();return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(g,{navPath:"/sign-in",linkText:"\u0412\u043e\u0439\u0442\u0438"}),Object(v.jsx)(x,{title:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",buttonName:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f",showedFooter:!0,onSubmit:function(e){var o=e.email,i=e.password;h.signup(o,i).then((function(e){console.log("registered"),a.push("/sign-in"),t()})).catch((function(e){var t=e.status,a=e.statusText;console.error("Failed to register.",t,a),n()}))}})]})},k=n(17);var y=function(e){var t=e.component,n=Object(k.a)(e,["component"]);return Object(v.jsx)(l.b,{children:n.loggedIn?Object(v.jsx)(t,Object(_.a)({},n)):Object(v.jsx)(l.a,{to:"/sign-in"})})};document.querySelector(".profile__edit-button"),document.querySelector(".profile__add-button"),document.querySelector(".profile__avatar-button");function S(e,t){var n=e?"".concat(e.status," ").concat(e.statusText):null;console.error(t,n)}var L=new(function(){function e(t,n){Object(b.a)(this,e),this._url=t,this._headers=n}return Object(j.a)(e,[{key:"_onResponse",value:function(e){return e.ok?e.json():Promise.reject({status:e.status,statusText:e.statusText})}},{key:"getCards",value:function(){return fetch("".concat(this._url,"cards"),{headers:this._headers}).then(this._onResponse)}},{key:"getUserInfo",value:function(){return fetch("".concat(this._url,"users/me"),{headers:this._headers}).then(this._onResponse)}},{key:"updateAvatar",value:function(e){return fetch("".concat(this._url,"users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then(this._onResponse)}},{key:"setProfile",value:function(e,t){return fetch("".concat(this._url,"users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e,about:t})}).then(this._onResponse)}},{key:"addCard",value:function(e,t){return fetch("".concat(this._url,"cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:e,link:t})}).then(this._onResponse)}},{key:"deleteCard",value:function(e){return fetch("".concat(this._url,"cards/").concat(e),{method:"DELETE",headers:this._headers}).then(this._onResponse)}},{key:"setLike",value:function(e){return fetch("".concat(this._url,"cards/likes/").concat(e),{method:"PUT",headers:this._headers}).then(this._onResponse)}},{key:"removeLike",value:function(e){return fetch("".concat(this._url,"cards/likes/").concat(e),{method:"DELETE",headers:this._headers}).then(this._onResponse)}},{key:"changeLikeCardStatus",value:function(e,t){return t?this.removeLike(e):this.setLike(e)}}]),e}())("https://mesto.nomoreparties.co/v1/cohort-20/",{authorization:"9a69937c-ba0b-400f-a7bf-af3d18fbfaea","content-type":"application/json"}),T=Object(a.createContext)();var w=function(e){var t=e.card,n=e.onCardClick,o=e.onCardLike,i=e.onCardDelete,c=Object(a.useContext)(T),s=t.owner._id===c._id,r="button card__remove-button ".concat(s?"card__remove-button_visible":""),u=t.likes.some((function(e){return e._id===c._id})),l="button card__like-button ".concat(u?"card__like-button_active":"");return Object(v.jsxs)("li",{className:"card",children:[Object(v.jsx)("button",{type:"button","aria-label":"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0443",className:r,onClick:function(){return i(t)}}),Object(v.jsx)("img",{className:"card__image",src:t.link,alt:"\u041a\u0430\u043c\u0447\u0430\u0442\u043a\u0430",onClick:function(){return n(t)}}),Object(v.jsxs)("div",{className:"card__info",children:[Object(v.jsx)("h2",{className:"card__title",children:t.name}),Object(v.jsxs)("div",{className:"card__like",children:[Object(v.jsx)("button",{type:"button","aria-label":"\u041d\u0440\u0430\u0432\u0438\u0442\u0441\u044f",className:l,onClick:function(){return o(t)}}),Object(v.jsx)("p",{className:"card__like-counter",children:null===t||void 0===t?void 0:t.likes.length})]})]})]})};var F=function(e){var t=e.cards,n=e.userEmail,o=e.onLogout,i=e.onEditProfile,c=e.onAddPlace,s=e.onEditAvatar,r=e.onCardClick,u=e.onCardLike,l=e.onCardDelete,p=Object(a.useContext)(T);return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(g,{navPath:"/sign-in",email:n,linkText:"\u0412\u044b\u0439\u0442\u0438",showMenu:!0,isButtonTextGrey:!0,onHeaderButtonClick:o}),Object(v.jsxs)("main",{className:"content page__content",children:[Object(v.jsxs)("section",{className:"profile",children:[p&&Object(v.jsxs)("div",{className:"profile__info",children:[Object(v.jsx)("div",{className:"profile__avatar-button",onClick:s,children:Object(v.jsx)("img",{className:"profile__avatar",src:p.avatar,alt:"\u0410\u0432\u0430\u0442\u0430\u0440 \u043f\u0440\u043e\u0444\u0438\u043b\u044f"})}),Object(v.jsxs)("div",{className:"profile__info-text",children:[Object(v.jsx)("h1",{className:"profile__name",children:p.name}),Object(v.jsx)("p",{className:"profile__activity",children:p.about}),Object(v.jsx)("button",{type:"button","aria-label":"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",name:"profile-edit-button",className:"button profile__edit-button",onClick:i})]})]}),Object(v.jsx)("button",{type:"button","aria-label":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0443",name:"profile-add-button",className:"button profile__add-button",onClick:c})]}),Object(v.jsx)("section",{className:"places page__places","aria-label":"\u041a\u0430\u0440\u0442\u043e\u0447\u043a\u0438 \u043c\u0435\u0441\u0442",children:Object(v.jsx)("ul",{className:"cards",children:t.map((function(e){return Object(v.jsx)(w,{card:e,onCardClick:r,onCardLike:u,onCardDelete:l},e._id)}))})})]})]})};var P=function(){return Object(v.jsx)("footer",{className:"footer page__footer",children:Object(v.jsx)("p",{className:"footer__copyright",children:"\xa92020 Mesto Russia"})})};var E=function(e){var t=e.card,n=e.onClose;return Object(v.jsx)("div",{className:"popup image-popup ".concat((null===t||void 0===t?void 0:t.link)&&"popup_opened"),children:Object(v.jsxs)("figure",{className:"popup__container popup__container_size_small image-popup__container",children:[Object(v.jsx)("button",{type:"button","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",className:"button popup__close-button popup__close-button_location_topright",onClick:n}),Object(v.jsx)("img",{className:"image-popup__image",src:null===t||void 0===t?void 0:t.link,alt:null===t||void 0===t?void 0:t.name}),Object(v.jsx)("figcaption",{className:"image-popup__caption",children:null===t||void 0===t?void 0:t.name})]})})};var R=function(e){var t=e.title,n=e.name,o=e.isOpen,i=e.onClose,c=e.onSubmit,s=e.isLoading,r=e.buttonText,l=e.children,p=(Object(k.a)(e,["title","name","isOpen","onClose","onSubmit","isLoading","buttonText","children"]),Object(a.useState)(!1)),d=Object(u.a)(p,2),_=d[0],b=d[1],j=Object(a.useRef)();return Object(a.useEffect)((function(){b(j.current.checkValidity())}),[o,i,l]),Object(v.jsx)("div",{className:"popup popup_name_".concat(n," ").concat(o&&"popup_opened"),children:Object(v.jsxs)("form",{ref:j,className:"popup__container popup__form",name:"".concat(n,"-form"),onSubmit:c,noValidate:!0,children:[Object(v.jsx)("button",{type:"button","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c \u0444\u043e\u0440\u043c\u0443",className:"button popup__close-button",onClick:i}),Object(v.jsx)("h2",{className:"popup__heading",children:t}),Object(v.jsxs)("fieldset",{className:"popup__info",children:[l,Object(v.jsx)("button",{type:"submit",className:"button popup__save-button ".concat(!_&&"popup__save-button_disabled"),disabled:!_,children:s?r+"...":r})]})]})})};var A=function(e){var t=e.isOpen,n=e.onClose,o=e.onUpdateUser,i=e.isLoading,c=Object(a.useContext)(T),s=Object(a.useState)(""),r=Object(u.a)(s,2),l=r[0],p=r[1],d=Object(a.useState)(""),_=Object(u.a)(d,2),b=_[0],j=_[1],h=Object(a.useState)(null),m=Object(u.a)(h,2),f=m[0],O=m[1],g=Object(a.useState)(null),x=Object(u.a)(g,2),N=x[0],C=x[1];return Object(a.useEffect)((function(){var e,t;p(null!==(e=null===c||void 0===c?void 0:c.name)&&void 0!==e?e:""),j(null!==(t=null===c||void 0===c?void 0:c.about)&&void 0!==t?t:"")}),[c]),Object(v.jsxs)(R,{name:"edit-profile",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",buttonText:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",isOpen:t,isLoading:i,onClose:function(){!function(){var e,t;p(null!==(e=null===c||void 0===c?void 0:c.name)&&void 0!==e?e:""),j(null!==(t=null===c||void 0===c?void 0:c.about)&&void 0!==t?t:""),O(null),C(null)}(),n()},onSubmit:function(e){e.preventDefault(),o({name:l,about:b})},children:[Object(v.jsx)("input",{type:"text",className:"form-input popup__input popup__input_name_name",name:"profile-name",value:l,onChange:function(e){var t=e.target.value;p(t),t?t.length<2||t.length>40?O("\u041f\u043e\u043b\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043c\u0438\u043d\u0438\u043c\u0443\u043c 2 \u0441\u0438\u043c\u0432\u043e\u043b\u0430 \u0438 \u043c\u0430\u043a\u0441\u0438\u043c\u0443\u043c 40."):O(null):O("\u041e\u0431\u0437\u0430\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435.")},placeholder:"\u0418\u043c\u044f \u043f\u0440\u043e\u0444\u0438\u043b\u044f",minLength:"2",maxLength:"40",required:!0}),Object(v.jsx)("span",{className:"popup__input-error popup__input-error_name_profile-name ".concat(f&&"popup__input-error_active"),children:f}),Object(v.jsx)("input",{type:"text",className:"form-input popup__input popup__input_name_activity",name:"profile-activity",value:b,onChange:function(e){var t=e.target.value;j(t),t?t.length<2||t.length>200?C("\u041f\u043e\u043b\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043c\u0438\u043d\u0438\u043c\u0443\u043c 2 \u0441\u0438\u043c\u0432\u043e\u043b\u0430 \u0438 \u043c\u0430\u043a\u0441\u0438\u043c\u0443\u043c 200."):C(null):C("\u041e\u0431\u0437\u0430\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435.")},placeholder:"\u0414\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c",minLength:"2",maxLength:"200",required:!0}),Object(v.jsx)("span",{className:"popup__input-error popup__input-error_name_profile-activity ".concat(N&&"popup__input-error_active"),children:N})]})};var D=function(e){var t=e.isOpen,n=e.onClose,o=e.onUpdateAvatar,i=e.isLoading,c=Object(a.useState)(""),s=Object(u.a)(c,2),r=s[0],l=s[1],p=Object(a.useState)(null),d=Object(u.a)(p,2),_=d[0],b=d[1],j=function(){l(""),b(null)},h=function(e){var t=e.target.value;l(e.target.value),t?/^(https?:\/\/)/.test(t)?b(null):b("\u041d\u0435 \u0432\u0435\u0440\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u0441\u0441\u044b\u043b\u043a\u0438."):b("\u041e\u0431\u0437\u0430\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435.")};return Object(v.jsxs)(R,{name:"update-avatar",title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",buttonText:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",isOpen:t,isLoading:i,onClose:function(){j(),n()},onSubmit:function(e){e.preventDefault(),o(r),j()},children:[Object(v.jsx)("input",{type:"url",className:"form-input popup__input popup__input_name_avatar-link",name:"avatar-link",value:r,onChange:h,onBlur:h,placeholder:"https://somewebsite.com/someimage.jpg",required:!0}),Object(v.jsx)("span",{className:"popup__input-error popup__input-error_name_avatar-link ".concat(_&&"popup__input-error_active"),children:_})]})};var q=function(e){var t=e.isOpen,n=e.onClose,o=e.onCardAdd,i=e.isLoading,c=Object(a.useState)(""),s=Object(u.a)(c,2),r=s[0],l=s[1],p=Object(a.useState)(""),d=Object(u.a)(p,2),_=d[0],b=d[1],j=Object(a.useState)(null),h=Object(u.a)(j,2),m=h[0],f=h[1],O=Object(a.useState)(null),g=Object(u.a)(O,2),x=g[0],N=g[1],C=function(e){var t=e.target.value;l(t),t?t.length<2||t.length>30?f("\u041f\u043e\u043b\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043c\u0438\u043d\u0438\u043c\u0443\u043c 2 \u0441\u0438\u043c\u0432\u043e\u043b\u0430 \u0438 \u043c\u0430\u043a\u0441\u0438\u043c\u0443\u043c 30."):f(null):f("\u041e\u0431\u0437\u0430\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435.")},k=function(e){var t=e.target.value;b(t),t?/^(https?:\/\/)/.test(t)?N(null):N("\u041d\u0435 \u0432\u0435\u0440\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u0441\u0441\u044b\u043b\u043a\u0438."):N("\u041e\u0431\u0437\u0430\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435.")},y=function(){l(""),b(""),f(null),N(null)};return Object(v.jsxs)(R,{name:"add-card",title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",isOpen:t,isLoading:i,buttonText:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",onClose:function(){y(),n()},onSubmit:function(e){e.preventDefault(),o({name:r,link:_}),y()},children:[Object(v.jsx)("input",{type:"text",className:"form-input popup__input popup__input_name_place-name",name:"place-name",value:r,onChange:C,onBlur:C,placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",minLength:"2",maxLength:"30",required:!0}),Object(v.jsx)("span",{className:"popup__input-error popup__input-error_name_place-name ".concat(m&&"popup__input-error_active"),children:m}),Object(v.jsx)("input",{type:"url",className:"form-input popup__input popup__input_name_place-image-url",name:"place-image-url",value:_,onChange:k,onBlur:k,placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",required:!0}),Object(v.jsx)("span",{className:"popup__input-error popup__input-error_name_place-image-url ".concat(x&&"popup__input-error_active"),children:x})]})};var B=function(e){var t=e.isOpen,n=e.onClose,a=e.onDeleteConfirm,o=e.isLoading,i=o?"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435":"\u0414\u0430";return Object(v.jsx)(R,{name:"remove-card",title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",buttonText:i,isOpen:t,isLoading:o,onClose:n,onSubmit:function(e){e.preventDefault(),a(),n()}})};var U=function(e){var t=e.isOpen,n=e.onClose,a=e.message,o=e.imageSrc;return Object(v.jsx)("div",{className:"popup popup_name_info ".concat(t&&"popup_opened"),children:Object(v.jsxs)("div",{className:"popup__container popup__form",children:[Object(v.jsx)("button",{type:"button","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c \u0444\u043e\u0440\u043c\u0443",className:"button popup__close-button popup__close-button_location_topcenter",onClick:n}),Object(v.jsxs)("div",{className:"popup__info",children:[Object(v.jsx)("img",{className:"popup__info-image",src:o,alt:"\u0423\u0441\u043f\u0435\u0445"}),Object(v.jsx)("h2",{className:"popup__info-text",children:a})]})]})})};var I=function(){var e=Object(a.useState)(!1),t=Object(u.a)(e,2),n=t[0],o=t[1],i=Object(a.useState)(!1),c=Object(u.a)(i,2),s=c[0],_=c[1],b=Object(a.useState)(!1),j=Object(u.a)(b,2),m=j[0],f=j[1],O=Object(a.useState)(!1),g=Object(u.a)(O,2),x=g[0],k=g[1],w=Object(a.useState)(!1),R=Object(u.a)(w,2),I=R[0],J=R[1],M=Object(a.useState)(!1),H=Object(u.a)(M,2),z=H[0],V=H[1],G=Object(a.useState)([]),K=Object(u.a)(G,2),Q=K[0],W=K[1],X=Object(a.useState)(null),Y=Object(u.a)(X,2),Z=Y[0],$=Y[1],ee=Object(a.useState)(!1),te=Object(u.a)(ee,2),ne=te[0],ae=te[1],oe=Object(a.useState)(null),ie=Object(u.a)(oe,2),ce=ie[0],se=ie[1],re=Object(a.useState)(null),ue=Object(u.a)(re,2),le=ue[0],pe=ue[1],de=Object(a.useState)(null),_e=Object(u.a)(de,2),be=_e[0],je=_e[1],he=Object(a.useState)(null),me=Object(u.a)(he,2),fe=me[0],Oe=me[1],ve=Object(a.useState)(null),ge=Object(u.a)(ve,2),xe=ge[0],Ne=ge[1],Ce=Object(l.g)();Object(a.useEffect)((function(){!function(){var e=localStorage.getItem("jwt");e&&h.getContent(e).then((function(e){$(e.data.email),o(!0),Ce.push("/")}))}(),L.getUserInfo().then((function(e){return je(e)})).catch((function(e){return S(e,"Failed to get user info.")})),L.getCards().then((function(e){return W(e)})).catch((function(e){return S(e,"Failed to get cards.")}))}),[]);var ke=function(){_(!1),f(!1),k(!1),se(null),J(!1),pe(null),V(!1)},ye=function(){Ne(d),Oe("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a! \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437."),V(!0)};return Object(v.jsx)("div",{className:"App page",children:Object(v.jsxs)(T.Provider,{value:be,children:[Object(v.jsxs)(l.d,{children:[Object(v.jsx)(l.b,{path:"/sign-in",children:Object(v.jsx)(N,{onSuccess:function(e){e&&h.getContent(e).then((function(e){$(e.data.email),o(!0),Ce.push("/")}))},onFailure:ye})}),Object(v.jsx)(l.b,{path:"/sign-up",children:Object(v.jsx)(C,{onSuccess:function(){Ne(p),Oe("\u0412\u044b \u0443\u0441\u043f\u0435\u0449\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c!"),V(!0)},onFailure:ye})}),Object(v.jsx)(y,{path:"/",loggedIn:n,component:F,cards:Q,userEmail:Z,onLogout:function(){o(!1),localStorage.removeItem("jwt")},onEditProfile:function(){_(!0)},onAddPlace:function(){f(!0)},onEditAvatar:function(){k(!0)},onCardClick:function(e){se(e)},onCardLike:function(e){var t=e.likes.some((function(e){return e._id===be._id}));L.changeLikeCardStatus(e._id,t).then((function(t){W((function(n){return n.map((function(n){return n._id===e._id?t:n}))}))})).catch((function(e){return S(e,"Failed to change like status.")}))},onCardDelete:function(e){pe(e),J(!0)}})]}),Object(v.jsx)(P,{}),Object(v.jsx)(A,{isOpen:s,onClose:ke,onUpdateUser:function(e){var t=e.name,n=e.about;ae(!0),L.setProfile(t,n).then((function(e){je(e),ke()})).catch((function(e){return S(e,"Failed to edit profile.")})).finally((function(){ae(!1)}))},isLoading:ne}),Object(v.jsx)(q,{isOpen:m,onClose:ke,onCardAdd:function(e){var t=e.name,n=e.link;ae(!0),L.addCard(t,n).then((function(e){W([e].concat(Object(r.a)(Q))),ke()})).catch((function(e){return S(e,"Failed to add new card.")})).finally((function(){ae(!1)}))},isLoading:ne}),Object(v.jsx)(D,{isOpen:x,onClose:ke,onUpdateAvatar:function(e){ae(!0),L.updateAvatar(e).then((function(e){je(e),ke()})).catch((function(e){return S(e,"Failed to update avatar.")})).finally((function(){ae(!1)}))},isLoading:ne}),Object(v.jsx)(E,{card:ce,onClose:ke}),Object(v.jsx)(B,{isOpen:I,onClose:ke,onDeleteConfirm:function(){ae(!0),L.deleteCard(le._id).then((function(){W((function(e){return e.filter((function(e){return e._id!==le._id}))})),ke()})).catch((function(e){return S(e,"Failed to remove card.")})).finally((function(){ae(!1),pe(null)}))},isLoading:ne}),Object(v.jsx)(U,{isOpen:z,onClose:ke,message:fe,imageSrc:xe})]})})};c.a.render(Object(v.jsx)(o.a.StrictMode,{children:Object(v.jsx)(s.a,{basename:"/react-mesto-auth/",children:Object(v.jsx)(I,{})})}),document.getElementById("root"))},5:function(e,t,n){}},[[38,1,2]]]);
//# sourceMappingURL=main.cad74bd5.chunk.js.map